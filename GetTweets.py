from tweepy import Streamimport jsonimport tweepyfrom tweepy import OAuthHandlerfrom tweepy import Streamfrom tweepy.streaming import StreamListenerfrom flask import Flask, render_template, request, flash, url_for, redirectapp = Flask(__name__)#consumer key, consumer secret, access token, access secret.ckey="Z13ORV2NHFgknJsPOCMCNNXkG"csecret="s7Ep9R6IbC9uPXhCehgNnDzyDM1lQcCMmnq0UQw06fQA0j9Hqs"atoken="1709707117-JibK1EyA7TCS3Hhuzn5rfOBKPSpepkm0jPSFHfP"asecret="zae8WJWSXoocsXiCYt8VQ0WJxBYQmP9sbvkXYUGbiYpB0"auth = OAuthHandler(ckey, csecret)auth.set_access_token(atoken, asecret)api = tweepy.API(auth)print "service started!"class listener(StreamListener):    def on_data(self, data):        print "method for tweet retrieval started!"        all_data = json.loads(data)        print "data fetched, saving it to file!"        outputfile = open('raw_data.txt', 'a')        outputfile.write(data)        outputfile.write('\n')        outputfile.close()        print "written to file!"        tweet = all_data["text"]        sentiment_value, confidence = s.sentiment(tweet)        display =(tweet, sentiment_value, confidence)        print display        if confidence * 100 >= 80:            output = open("twitter-out.txt", "a")            output.write(sentiment_value)            output.write('\n')            output.close()            print "returning result to web!"            return display        return True    def on_error(self, status):        print(status)        print "error ! ->"@app.route('/', methods=['GET'])def index():    print "get request received! Processing request"    return render_template("home.html")@app.route('/post', methods=['post'])def method():    data = {}    print "post request!"    search_string = request.form.get('search_string')    print search_string    i=0    for tweet in tweepy.Cursor(api.search,q=search_string,count=0,since="2018-01-14",until="2018-01-15",lang="en").items():        print i        data[i] = tweet.text        i = i + 1        if i > 10:            print "data feeding stoppedd!"            break        print str(i)      #  print tweet.text    json_data = json.dumps(data)    # create a simple JSON array    #jsonString = '{"key1":"value1","key2":"value2","key3":"value3"}'    # change the JSON string into a JSON object    jsonObject = json.loads(json_data)    # print the keys and values    for key in jsonObject:        value = jsonObject[key]        print "Twitter -> " + value               import sentiment_mod as s        sentiment_value, confidence = s.sentiment(tweet)        display = (tweet, sentiment_value, confidence)        print display        if confidence * 100 >= 80:            output = open("twitter-out.txt", "a")            output.write(sentiment_value)            output.write('\n')            output.close()            print "returning result to web!"            return display        return True            pass    return render_template("analysis.html")'''    search_string = request.form.get('search_string')    print search_string    twitterStream = Stream(auth, listener())    twitterStream.filter(track=[search_string])'''if __name__ == '__main__':    app.run()